
TCP에서 데이터를 전송할 때, 각 **바이트(byte)** 에는 **고유한 번호(Sequence Number)** 가 부여된다. 이 번호는 데이터를 올바른 순서로 재조립하고, 손실이나 중복을 감지하는 데 사용된다.

TCP는 연결이 설정될 때 **시작 번호** 를 **임의(random)** 로 정한다. 이 시작 번호가 바로 **Sequence Number** 의 출발점이다. 즉, 모든 TCP 연결은 서로 다른 랜덤한 시퀀스 번호에서  시작한다.  

이렇게 랜덤하게 시작 번호를 부여하는 이유는 **보안상 이유(이전 연결과의 혼동 방지, 세션 하이재킹 예방)** 와 **데이터의 신뢰성 유지** 때문이다.

![](Pasted%20image%2020251014020043.png)

예를 들어, 5,000바이트짜리 파일을 전송한다고 가정하자. 이때 TCP가 처음 바이트의 번호를 **10001**로 랜덤하게 선택했다고 하자. 그리고 데이터를 1,000바이트 단위로 잘라서 여러 **세그먼트(segment)** 로 보낸다면, 각 세그먼트의 시퀀스 번호는 다음과 같이 된다:

|세그먼트|포함된 바이트 범위|Sequence Number(시작 번호)|
|---|---|---|
|1번 세그먼트|10001 ~ 11000|10001|
|2번 세그먼트|11001 ~ 12000|11001|
|3번 세그먼트|12001 ~ 13000|12001|
|4번 세그먼트|13001 ~ 14000|13001|
|5번 세그먼트|14001 ~ 15000|14001|

이렇게 **각 세그먼트의 시퀀스 번호는 해당 세그먼트의 첫 번째 바이트 번호**를 의미한다. 수신 측은 이 번호를 이용해 **데이터를 정확한 순서로 재조립**하고, 누락된 부분이 있으면 그 구간의 번호를 ACK으로 알려 송신 측이 재전송하도록 한다.

---
### ACK 은 다음 보내야 할 걸 나타낸다.

TCP는 **신뢰성 있는 데이터 전송**을 보장하기 위해, 수신 측이 데이터를 받으면 송신 측에 **“잘 받았다”** 는 신호를 보낸다. 이 신호가 바로 **ACK(Acknowledgment)** 이며, 그 값을 **Acknowledgment Number**를 통해 나타낸다. 

![](Pasted%20image%2020251014020412.png)

ACK 번호를 표현하는 방식에는 크게 두 가지가 있다.

1. **Selective ACK (선택적 확인)**
    
    - 받은 세그먼트마다 개별적으로 ACK을 보낸다.
        
    - 일부 데이터가 손실된 경우, **어떤 구간의 데이터가 도착했고 어떤 구간이 누락되었는지**를 구체적으로 알려줄 수 있다.
        
    - 즉, **부분적인 수신 상황을 표현**할 수 있다.
        
2. **Cumulative ACK (누적 확인)**
    
    - “지금까지의 모든 데이터를 순서대로 잘 받았다”는 의미로,  
        **다음에 받아야 할 Sequence Number** 하나만을 보낸다.
        
    - 예를 들어 10001~13000까지 데이터를 모두 받았다면 **ACK = 13001**이 된다.
        
    - 중간에 일부 데이터가 손실되었을 경우, 누락된 부분 이전 번호의 ACK을 계속 반복해서 보내 송신 측이 문제를 감지하도록 한다.

TCP는 기본적으로 **Cumulative Acknowledgment 방식**을 사용한다.  

이 방식은 구현이 간단하고, 네트워크 상의 ACK 트래픽을 줄일 수 있다는 장점이 있다. 단, 여러 구간이 동시에 손실된 경우에는 상황을 정확히 표현하기 어렵기 때문에, 이를 보완하기 위해 **Selective Acknowledgment (SACK)** 옵션이 추가로 사용되기도 한다.