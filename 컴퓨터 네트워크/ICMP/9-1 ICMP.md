ICMP는 **Internet Control Message Protocol**의 약자로, IP 네트워크에서 **오류 상황을 알리기 위해 사용되는 프로토콜**이다.  

앞에서 본 것처럼 **IP 프로토콜 자체는 오류를 발견해도 이를 알려주거나 고쳐주지 않는다.**  
바로 이 부분을 보완하는 역할을 하는 것이 ICMP다.

![](../../images/Pasted%20image%2020251126170120.png)

ICMP는 **네트워크 계층(Network Layer, L3)** 에 속하는 프로토콜이다.  
따라서 IP 패킷 내부, 즉 IP 데이터그램의 **데이터(payload)** 영역 안에 ICMP 메시지가 들어간다.

![](../../images/Pasted%20image%2020251126170153.png)

데이터 링크 계층에서는 **Frame** 단위로 전송되며, 그 Frame의 데이터 부분에는 **IP 데이터그램 전체(= IP 헤더 + IP 데이터)** 가 담긴다. 그리고 그 IP 데이터 안에 **ICMP 메시지**가 위치하게 된다.  

즉, “ICMP는 IP의 페이로드로 실려가는 구조”다.

ICMP 메시지는 “어떤 종류의 오류가 발생했는지”를 상위로 전달해주는 역할을 한다.

특히 흥미로운 점은, ICMP 오류 메시지를 보낼 때 **원래의 IP 헤더가 그대로 포함되어 돌아온다.**

이 이유는 다음과 같다:

- 원래 패킷이 **어디로 가려던 것인지(IP 목적지)** 알 수 있고
    
- 어느 지점에서 오류가 발생했는지 라우터가 알려줄 수 있다
    

결과적으로 ICMP는  
**패킷이 실패한 이유 + 문제 위치**를 추적할 수 있게 해주는 네트워크 진단 기능을 제공한다.