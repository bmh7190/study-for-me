## DHCP

IP 주소는 **유동(동적)인지 고정(정적)인지에 따라 비용 차이가 크다.** 

특히 일반 네트워크 환경에서는 단말기가 직접 IP를 지정하지 않고, 네트워크로부터 자동으로 IP를 부여받는데 이때 사용하는 프로토콜이 **DHCP(Dynamic Host Configuration Protocol)** 이다.

![](../../images/Pasted%20image%2020251207161808.png)

장치는 네트워크에 처음 연결되면 아직 자신의 IP 주소를 알지 못한다. 따라서 DHCP 요청 패킷을 만들 때 **자신의 IP 필드는 전부 0으로 채운 상태로 전송**한다. 또한 DHCP 서버의 위치나 주소도 모르기 때문에, 요청 패킷은 **브로드캐스트 주소로 전송되어 같은 서브넷의 모든 장비가 받을 수 있게 한다.**

이 패킷을 수신한 DHCP 서버는 내용이 DHCP 메시지임을 확인한 뒤, 사용 가능한 IP 중 하나를 선택해 클라이언트에게 할당한다. 이후 서버는 **응답 메시지(DHCP Offer 등)** 를 보내고, 클라이언트는 이를 승인해 IP 설정을 완료하는 구조로 동작한다. 이러한 방식 덕분에 장비는 네트워크에 연결될 때마다 자동으로 IP를 받을 수 있고, 사용자는 별도의 설정 없이 통신이 가능해진다.

---
## Example of limited broadcast address 

IPv4에서 **255.255.255.255** 는 _limited broadcast address_ 로, 같은 네트워크 내 모든 장비에게 메시지를 전달할 때 사용된다. 단말이 이 주소로 패킷을 보내면, 동일한 서브넷에 있는 모든 호스트가 이를 수신하며, 각 수신자는 패킷을 확인해 **자신에게 필요한 메시지인지 여부를 판단하는 과정**을 거친다.

![](../../images/Pasted%20image%2020251207161917.png)

이때 중요한 점은 **라우터가 이 패킷을 다른 네트워크로 전달하지 않는다**는 것이다.  
만약 라우터가 이를 전달한다면, 브로드캐스트가 네트워크를 타고 끝없이 퍼질 수 있기 때문이다. 

---
## Example of a directed broadcast address
Directed broadcast 주소는 **특정 네트워크의 모든 호스트에게 보내는 브로드캐스트 주소**이다. 네트워크에서 첫 번째 주소(네트워크 주소)와 마지막 주소(브로드캐스트 주소)는 개별 장비에 할당되지 않는데, 이 중 마지막 주소가 바로 **directed broadcast address**가 된다.

![](../../images/Pasted%20image%2020251207162333.png)

예를 들어 네트워크가 `192.168.1.0/24` 라면:

- 네트워크 주소: `192.168.1.0`
    
- 마지막 주소(= directed broadcast): `192.168.1.255`

이 주소로 패킷을 보내면 **192.168.1.0/24 네트워크에 속한 모든 호스트가 이를 수신**한다.  
즉, broadcast이지만 특정 네트워크에 “지향(directed)”되어 있다는 의미다.

**Limited broadcast**는 주소 `255.255.255.255` 를 사용하여 **자신이 속한 로컬 네트워크 내의 모든 장비에게만** 메시지를 전달한다. 라우터는 이 패킷을 다른 네트워크로 전달하지 않기 때문에, 브로드캐스트는 현재 서브넷을 벗어나지 않고 내부에서만 소비된다.

반면 **Directed broadcast**는 특정 네트워크의 브로드캐스트 주소(예: `192.168.1.255` 와 같은 마지막 주소)를 사용하여 **지정한 네트워크 전체에게** 메시지를 보낸다. 라우터가 이를 전달할 수 있도록 설정되어 있다면, 내 서브넷이 아니더라도 해당 네트워크의 모든 호스트가 그 메시지를 수신할 수 있다.

---
## Example of loopback address

Loopback 주소는 실제 네트워크로 전달되지 않는 **자기 자신을 대상으로 하는 테스트용 주소 영역**이다. IPv4에서는 **127.x.x.x (대표적으로 127.0.0.1)** 이 여기에 해당하며, 장비가 자체 네트워크 스택을 확인하거나 애플리케이션@을 시험할 때 사용된다.

이 주소로 패킷을 보내면 외부 네트워크로 나가지 않고 즉시 로컬 스택에서 처리되므로, “**내가 나에게 요청을 보내는 것**”과 같은 효과를 갖는다.

![](../../images/Pasted%20image%2020251207162028.png)

TCP로 테스트할 경우 혼잡 제어, ACK 등 안정화 메커니즘이 존재해 문제가 발생하기 어렵지만, UDP는 이런 보호 장치가 없어 실제 네트워크에 잘못된 테스트 트래픽을 흘리면 네트워크에 충격을 줄 수 있다. 따라서 UDP 기반 시스템을 검증하거나 네트워크 영향을 피하고 싶을 때 **loopback 주소를 활용해 안전하게 테스트**하는 것이 일반적이다.

---

## Address of private networks

내부 네트워크에서는 외부 인터넷과 충돌하지 않도록 **사설 IP 주소 공간(Private IP Range)** 이 별도로 정의되어 있다. 만약 사설망에서 이 범위를 사용하지 않고 임의의 공인 IP를 내부 주소로 사용하면, 내부 통신 자체는 문제가 없지만 **외부로 나가는 요청이 실제 인터넷상의 동일한 주소와 충돌할 위험이 생긴다.** 즉, 동일한 IP가 내부와 외부에 동시에 존재할 수 있어 혼선이 발생하는 것이다.

![](../../images/Pasted%20image%2020251207162742.png)

따라서 사설망에서는 반드시 사설 IP 영역을 사용해야 하며, 이를 통해 **“이 주소는 내부망에 속한다”** 는 사실을 명확히 구분할 수 있다. 이런 구조 덕분에 네트워크는 주소 충돌을 방지하고, 내부/외부 주소 체계를 안전하게 유지할 수 있다.


